{%extends "index.html"%}

{%block media_location%}
   
                  
		<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}media1/style/css/events-tab.css" />   
		<script type="text/javascript" src="{{MEDIA}}media1/scripts/js/jquery-1.5.2-min.js"></script>
		<script type="text/javascript" src="{{MEDIA_URL}}media1/scripts/js/jquery.jscrollpane.min.js"></script>
		<script type="text/javascript" src="{{MEDIA_URL}}media1/scripts/js/jquery.mousewheel.js"></script>
		
                <script type="text/javascript">
			var elem=['intro','pstmnt','rules','faq','contact','extraTabs','',''];
                        var tot=0;
                        {%for row in tab_list%}
                             elem[{{forloop.counter0}}]='{{row.title|slugify}}';
                             tot=tot+1;
                         {%endfor%}
                       
			var tabHeights=['420px','500px','600px','700px','800px','2000px','2200px','2500px'];
			//var i_=0,p=0,r=0,f=0,c=0,e=0;
			
			$(function(){
				$('#event-details').jScrollPane({showArrows: true});
			});
			window.onload=function(){		
				document.getElementById('page').style.display="block";
				setVisible(elem[0]);
				setBgGreen(elem[0]);
			}

			$(document).ready(function() {
				$("#tabs").click(function(e) {
					var id=e.target.id;
					setBgGreen(id);
					setVisible(id);							
				});	
			
			});
			
			function setVisible(e){
				document.getElementById(e+'_').style.visibility="visible";
				
				for(i=0;i<tot;i++)	if(elem[i]==e)	document.getElementById('jspPane').style.height=tabHeights[i];
				for(i=0;i<tot;i++)	if(elem[i]!=e)	document.getElementById(elem[i]+'_').style.visibility="hidden";
				for(i=0;i<tot;i++)	if(elem[i]!=e)	document.getElementById(elem[i]+'_').style.height="0px"; 
				
				$(function(){$('#event-details').jScrollPane({showArrows: true});});
			}
			
			function setBgGreen(e){
				document.getElementById(e).style.backgroundColor="#93C66E";
				for(i=0;i<tot;i++)	if(elem[i]!=e)	document.getElementById(elem[i]).style.backgroundColor="#5185BE";
			}
		</script>
  
               

<!--<script src="http://code.jquery.com/jquery-latest.js"></script>-->


{%endblock%}



{%block body%}

     
          <div id="video">
       <div id="eventtitle" style="position:relative;top:-15px">{{event_name}}</div>	
		<div id="eventsTab">
			<div id="tabs">

                             {% for row in tab_list%}
				<div id="{{row.title|slugify }}">{{row.title}}</div>
			    <!--<div id="pstmnt">Problem Statement</div>
				<div id="rules">Rules</div>
				<div id="faq">FAQ</div>
				<div id="contact">Contact</div>	
			    	<div id="extraTabs">More Tabs Here</div>-->
                            {%endfor%}				
			</div>
                        
			<div id="event-details">
                              {%for row in tab_list %}
				<div id="{{row.title|slugify }}_">
                                       {%if not row.question_tab%} 
                                                 <p>{{row.text|safe}}</p>
                                                        <br />
                                                        <br />

                                                    <!-- displaying file list -->

                                                       <div id="file_display">
                                                            <div id="file_header">
                                                              CURRENTLY UPLOADED FILES
                                                             </div>
                                                              <br/>

                                                        <!-- displaying the file url -->
                 
                                                         <div id="file_content">  
                                                        {%for file in row.file_list %}
                                                       <a href={{file.url}}>{{file.title}}</a>
                                                           <br/>
                                                       {%endfor%}

                                                       </div>
                                                     </div>


                                           {%else%}

                                      {% for ques in ques_list %}
	                             <!-- for now the whole question is the href. later we can get an image of + sign before the question and make only that href -->
                                       <div id="Ques{{ques.Q_Number}}">
                                      <a href="#Question{{ques.Q_Number}}">{{ques.Q_Number}}</a><br/>
                                     </div>         
                     

        
                   
	             
	             <div id="Question{{ques.Q_Number}}">
			                               
                           <!-- The answer Form -->
               
                          <div id="form{{ques.Q_Number}}">
                          <form action="" method="POST" enctype="multipart/form-data">
		            {% csrf_token %}
		            <table>
			      {{ques.title|safe}}
		            </table>
		      
                             <br /><br />
                                
                                    
                                       
	                                  
                                <!-- as of now a html text area. once views are written will be made proper --> 
                                      <!--<input type="textarea" name="Answer" size="400"value="Answer" />-->
                                      <textarea name="answers" row=100 column=100></textarea><br />
                                      <input type="submit" value="Submit" />
	                             


                 

	                    </form>
                           </div>   
                   </div> 
                   <br />


                      
                      
                    
                 
                      

                  <script>
                     $("#Question{{ques.Q_Number}}").hide();
                     $("#Ques{{ques.Q_Number}}").click(function () {
                     $("#Question{{ques.Q_Number}}").toggleClass("inactive").slideToggle("slow");
                       });
                 </script>
             
       

                  {%endfor%}

         	<br/><br/>


     


        <!-- the SAVE ANSWERS button -->
        <!-- once clicked will be redirected to the testevent page-->

	<div id="save_answers">
           <form action="" method ="POST">
	      {% csrf_token %}
           
	   <input type="submit" value="Save Answers" />
	   </form>
	</div>


        <!-- the freeze answers button -->

        <div id="freeze_answers">
              <form action="freeze_answers/" method ="POST">
	      {% csrf_token %}
             
	      <input type="submit" value="Freeze Answers" />
	      </form>
	</div>  

   {%endif%}

				</div>
                              {%endfor%}
					</div>
		</div>
		
			
	<div id="preload" style="visibility:hidden; height:0px;">
		<img src="intro_.png" />
		<img src="pstmnt_.png" />
		<img src="rules_.png" />
		<img src="faq_.png" />
		<img src="contact_.png" />
	</div>


</div>
{%endblock%}
